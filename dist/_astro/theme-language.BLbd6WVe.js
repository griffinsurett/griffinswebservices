import{r as i,j as o}from"./react-core.LlkHSr3O.js";const b=[{code:"en",name:"English",nativeName:"English",flag:"ðŸ‡ºðŸ‡¸"},{code:"es",name:"Spanish",nativeName:"EspaÃ±ol",flag:"ðŸ‡ªðŸ‡¸"},{code:"hi",name:"Hindi",nativeName:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",flag:"ðŸ‡®ðŸ‡³"},{code:"iw",name:"Hebrew",nativeName:"×¢×‘×¨×™×ª",flag:"ðŸ‡®ðŸ‡±"},{code:"de",name:"German",nativeName:"Deutsch",flag:"ðŸ‡©ðŸ‡ª"},{code:"ru",name:"Russian",nativeName:"Ð ÑƒÑÑÐºÐ¸Ð¹",flag:"ðŸ‡·ðŸ‡º"},{code:"uk",name:"Ukrainian",nativeName:"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°",flag:"ðŸ‡ºðŸ‡¦"},{code:"it",name:"Italian",nativeName:"Italiano",flag:"ðŸ‡®ðŸ‡¹"},{code:"fr",name:"French",nativeName:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},{code:"pt",name:"Portuguese",nativeName:"PortuguÃªs",flag:"ðŸ‡µðŸ‡¹"},{code:"zh-CN",name:"Chinese (Simplified)",nativeName:"ç®€ä½“ä¸­æ–‡",flag:"ðŸ‡¨ðŸ‡³"},{code:"zh-TW",name:"Chinese (Traditional)",nativeName:"ç¹é«”ä¸­æ–‡",flag:"ðŸ‡¹ðŸ‡¼"},{code:"ja",name:"Japanese",nativeName:"æ—¥æœ¬èªž",flag:"ðŸ‡¯ðŸ‡µ"},{code:"ko",name:"Korean",nativeName:"í•œêµ­ì–´",flag:"ðŸ‡°ðŸ‡·"},{code:"ar",name:"Arabic",nativeName:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",flag:"ðŸ‡¸ðŸ‡¦"},{code:"fa",name:"Farsi",nativeName:"ÙØ§Ø±Ø³ÛŒ",flag:"ðŸ‡®ðŸ‡·"}],r=b[0];function C(a){return b.find(s=>s.code===a)}const v="open-cookie-preferences";function y(){return typeof window>"u"?!1:(window.dispatchEvent(new CustomEvent(v)),!0)}function P(a){return typeof window>"u"?()=>{}:(window.addEventListener(v,a),()=>window.removeEventListener(v,a))}function x(){if(typeof document>"u")return!1;const a=document.cookie.match(/cookie-consent=([^;]*)/);if(!a)return!1;try{return JSON.parse(decodeURIComponent(a[1]))?.functional===!0}catch{return!1}}function N(){return typeof window>"u"?!1:window.getTranslationConfig?.()?.enableNative!==!1&&"Translator"in window}function L(){return typeof window>"u"?!0:window.getTranslationConfig?.()?.enableGoogle!==!1}function E(){return typeof window>"u"?r.code:localStorage.getItem("user-language")||r.code}function k(){const[a,s]=i.useState(E),[d,f]=i.useState(x);i.useEffect(()=>{const n=t=>{t.key==="user-language"&&s(t.newValue||r.code)},e=t=>{s(t.detail||r.code)};return window.addEventListener("storage",n),window.addEventListener("language-changed",e),()=>{window.removeEventListener("storage",n),window.removeEventListener("language-changed",e)}},[]),i.useEffect(()=>{if(typeof window>"u")return;const n=()=>f(x());return window.addEventListener("consent-changed",n),()=>window.removeEventListener("consent-changed",n)},[]);const m=C(a)||r,l=N(),u=L(),w=!l&&u&&!d,c=i.useCallback(n=>{const e=N(),t=L(),g=x();return!e&&t&&!g&&n!=="en"?{success:!1,error:"Please enable functional cookies to use the language switcher."}:!e&&!t&&n!=="en"?{success:!1,error:"Translation is currently disabled."}:C(n)?(s(n),typeof window<"u"&&window.dispatchEvent(new CustomEvent("language-changed",{detail:n})),typeof window<"u"&&window.changeLanguage&&window.changeLanguage(n),{success:!0}):{success:!1,error:`Invalid language code: ${n}`}},[]),p=i.useCallback(()=>{y()},[]),h=i.useCallback(()=>{c(r.code)},[c]);return{currentLanguage:m,languageCode:a,hasFunctionalConsent:d,hasNativeTranslation:l,isGoogleTranslateEnabled:u,requiresConsent:w,supportedLanguages:b,changeLanguage:c,openConsentModal:p,resetLanguage:h}}function F({open:a,onClose:s,onLanguageChange:d,className:f=""}){const{currentLanguage:m,requiresConsent:l,supportedLanguages:u,changeLanguage:w,openConsentModal:c}=k(),p=()=>{c(),s()},h=e=>{const t=w(e);if(!t.success&&t.error){alert(t.error);return}d(e),s()};if(!a)return null;const n=["absolute top-full z-[60] mt-3 min-w-[220px] rounded-2xl border card-bg p-3 shadow-2xl backdrop-blur-xl",f].filter(Boolean).join(" ");return o.jsxs("div",{className:n,onWheel:e=>e.stopPropagation(),onWheelCapture:e=>e.stopPropagation(),children:[l&&o.jsxs("button",{type:"button",onClick:p,className:"mb-2 rounded-xl border border-yellow-400/40 bg-yellow-500/15 px-3 py-2 text-xs text-text text-left transition hover:border-yellow-400 hover:bg-yellow-500/25 focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-400",children:["Enable functional cookies to switch languages.",o.jsx("span",{className:"mt-1 block text-[11px] font-semibold uppercase tracking-wide text-primary",children:"Manage consent preferences"})]}),o.jsx("div",{className:"flex max-h-64 flex-col overflow-y-auto",children:u.map(e=>{const t=e.code===m.code,g=l&&e.code!=="en";return o.jsxs("button",{type:"button",className:`flex items-center gap-3 rounded-xl px-3 py-2 text-sm transition ${t?"bg-primary/20 text-primary font-semibold":"hover:bg-white/5 text-text"} ${g?"cursor-not-allowed opacity-60":""}`,onClick:()=>h(e.code),disabled:g,children:[e.flag&&o.jsx("span",{className:"text-lg","aria-hidden":"true",children:e.flag}),o.jsxs("span",{className:"flex-1 text-left",children:[o.jsx("span",{className:"block text-base leading-tight",children:e.nativeName}),o.jsx("span",{className:"text-xs text-text/70",children:e.name})]}),t&&o.jsx("span",{className:"text-primary","aria-label":"Currently selected language",children:o.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:o.jsx("path",{d:"M5 12l4 4L19 7"})})})]},e.code)})})]})}export{F as L,P as s,k as u};
