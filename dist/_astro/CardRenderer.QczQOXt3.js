import{j as c,r as x}from"./react-core.WNgh4ro3.js";import{A as O,a as L}from"./ui-primitives.DD_n4qOz.js";import T from"./FeatureCard.Ci3nCnoP.js";import"./visibility-hooks.D01aUBrU.js";import"./accordion.BZvlXnnu.js";import"./engagement-hooks.CBHz9eKX.js";const E={1:"grid grid-cols-1 gap-8",2:"grid grid-cols-1 md:grid-cols-2 gap-8",3:"max-3-secondary",4:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"};function P({items:i=[],columns:e=3,className:s="",showBody:d=!1,getCardClassName:p,getRingDuration:r,featureCardProps:m={},getFeatureCardProps:n,disableStagger:t=!1,animation:a}){const l=Array.isArray(i)?i:[],f=!t&&l.length>=3,b=100,j="fade-in-up",h=a?.once??!0,N=o=>a?.type?typeof a.type=="function"?a.type(o):a.type:j,u=o=>f?o%e*b:0,v=(o,g)=>{if(typeof p=="function")return p(o,g);const y=o;return[y?.class,y?.className].filter(Boolean).join(" ")},S=(o,g)=>{if(typeof r=="function")return r(o,g);const y=o;return typeof y?.ringDuration=="number"?y.ringDuration:800},w=(o,g)=>{const y=typeof n=="function"?n(o,g):{};return{...m,...y}};return l.length===0?null:c.jsx("ul",{className:`${E[e]} list-none ${s}`.trim(),children:l.map((o,g)=>{const y=u(g),D=w(o,g),{className:I,ringDuration:C,data:G,...R}=D??{},k=[v(o,g),I].filter(Boolean).join(" "),z=typeof C=="number"?C:S(o,g),_=N(g),$=o,B=$?.contentSlotId,M=$?.showBody??d;return c.jsx("li",{className:"h-full","data-animate":_,"data-animate-once":h?"true":void 0,"data-animate-delay":f?String(y):void 0,"data-animate-threshold":a?.threshold!==void 0?String(a.threshold):void 0,"data-animate-root-margin":a?.rootMargin,children:c.jsx(T,{data:o,ringDuration:z,className:k,showBody:M,contentSlotId:B,...R})},g)})})}const U={sm:{padding:"px-3 py-2",text:"text-sm",gap:"gap-1.5",iconSize:"text-base"},md:{padding:"px-4 py-2.5",text:"text-base",gap:"gap-2",iconSize:"text-lg"},lg:{padding:"px-5 py-3",text:"text-lg",gap:"gap-2.5",iconSize:"text-xl"}};function W({id:i,name:e,option:s,checked:d,onChange:p,size:r="sm",showCount:m=!1,className:n=""}){const t=U[r],a=()=>{p(s.key)};return c.jsxs("div",{className:`relative ${n}`,children:[c.jsx("input",{type:"radio",id:i,name:e,value:s.key,checked:d,onChange:a,className:"absolute -left-[9999px]","aria-hidden":"true"}),c.jsx(O,{variant:"progress-b-f",triggers:"controlled",active:d,duration:400,borderRadius:"rounded-full",borderWidth:2,color:"var(--color-accent)",innerClassName:"card-bg border-off-hover",children:c.jsxs("label",{htmlFor:i,className:`
            ${t.padding} rounded-full font-medium main-duration transition-all
            flex items-center ${t.gap} cursor-pointer ${t.text}
            ${d?"text-accent":"text-heading hover:text-accent"}
          `,children:[s.icon?c.jsx(L,{data:{icon:s.icon,title:s.label},layout:"horizontal",alignment:"center",className:t.gap,iconClassName:`${t.iconSize} ${d?"text-accent":""}`,titleClassName:`${t.text} font-medium`,titleTag:"span",showDescription:!1}):c.jsx("span",{children:s.label}),m&&s.count!==void 0&&c.jsxs("span",{className:`${t.text} opacity-60`,children:["(",s.count,")"]})]})})]})}const A="__all__";function Y(i,e){const{field:s,mode:d,options:p}=e;if(d==="custom"&&p)return p;const r=new Map;for(const m of i){const n=m,t=n[s];if(t!=null)if(Array.isArray(t))for(const a of t){const l=String(a),f=r.get(l);f?f.count++:r.set(l,{label:F(l),count:1})}else{const a=String(t),l=r.get(a);if(l)l.count++;else{let f;d==="parent"&&n.parentData?.icon&&(f=n.parentData.icon),r.set(a,{label:F(a),icon:f,count:1})}}}return Array.from(r.entries()).map(([m,n])=>({key:m,label:n.label,icon:n.icon,count:n.count}))}function F(i){return i.replace(/-/g," ").replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}function q(i,e,s){return e===A?i:i.filter(d=>{const r=d[s];return r==null?!1:Array.isArray(r)?r.includes(e):String(r)===e})}function K({items:i=[],filter:e,filterSize:s="sm",filterClassName:d="",filterName:p,onFilterChange:r,...m}){const n=Array.isArray(i)?i:[],t=x.useMemo(()=>{const u=Y(n,e);return e.showAll!==!1?[{key:A,label:e.allLabel??"All",icon:e.allIcon,count:n.length},...u]:u},[n,e]),a=x.useMemo(()=>e.defaultFilter&&t.some(v=>v.key===e.defaultFilter)?e.defaultFilter:t[0]?.key??A,[e.defaultFilter,t]),[l,f]=x.useState(a),b=x.useMemo(()=>q(n,l,e.field),[n,l,e.field]),j=x.useCallback(u=>{f(u),r?.(u)},[r]),h=p??`filter-${e.field}-${Date.now()}`,N=t.length>1;return n.length===0?null:c.jsxs("div",{className:"filtered-card-renderer",children:[N&&c.jsx("div",{className:`flex flex-wrap gap-2 justify-center mb-8 ${d}`.trim(),role:"radiogroup","aria-label":`Filter by ${e.field}`,children:t.map(u=>c.jsx(W,{id:`${h}-${u.key}`,name:h,option:u,checked:l===u.key,onChange:j,size:s,showCount:e.showCount},u.key))}),c.jsx("div",{className:"transition-all duration-300 ease-in-out",children:c.jsx(P,{items:b,...m})},l)]})}export{K as F,P as default};
