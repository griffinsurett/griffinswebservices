import{r as p,j as c}from"./react-core.WNgh4ro3.js";import{A,a as v}from"./ui-primitives.DfQz2UUJ.js";import C from"./CardRenderer.Bzz53baK.js";import"./visibility-hooks.BMFxEQoV.js";import"./accordion.xDpHYJPo.js";import"./engagement-hooks.BJITinHp.js";import"./FeatureCard._TEtxhUe.js";const g="__all__";function $(l){if(l.length===0)return null;const r=l.slice(0,5);if(r.some(t=>t.parent!==void 0&&t.parent!==null))return"parent";if(r.some(t=>Array.isArray(t.tags)&&t.tags.length>0))return"tags";if(r.some(t=>t.category!==void 0&&t.category!==null))return"category";for(const t of r)for(const[n,e]of Object.entries(t))if(!["slug","url","title","description","icon","image","order","Content","content"].includes(n)&&e&&typeof e=="object"){if("id"in e||"slug"in e||"collection"in e)return n;if(Array.isArray(e)&&e.length>0&&typeof e[0]=="object"){const i=e[0];if("id"in i||"slug"in i||"collection"in i)return n}}return null}function x(l){return l==null?null:typeof l=="string"?l:typeof l=="object"?l.id||l.slug||null:String(l)}function b(l){return l.replace(/-/g," ").replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase())}function w(l,r){const t=new Map;for(const n of l){const e=n[r];if(e!=null)if(Array.isArray(e))for(const i of e){const s=x(i);if(!s)continue;const o=t.get(s);if(o)o.count++;else{const a=typeof i=="object"&&(i.title||i.label||i.name)||s,u=typeof i=="object"?i.icon:void 0;t.set(s,{label:b(a),icon:u,count:1})}}else{const i=x(e);if(!i)continue;const s=t.get(i);if(s)s.count++;else{let o=i,a;typeof e=="object"?(o=e.title||e.label||e.name||i,a=e.icon):r==="parent"&&n.parentData&&(o=n.parentData.title||n.parentData.label||i,a=n.parentData.icon),t.set(i,{label:b(o),icon:a,count:1})}}}return Array.from(t.entries()).map(([n,e])=>({key:n,label:e.label,icon:e.icon,count:e.count}))}function N(l,r,t){return r===g?l:l.filter(n=>{const e=n[t];return e==null?!1:Array.isArray(e)?e.some(i=>x(i)===r):x(e)===r})}function I(l,r){const t=Array.isArray(l)?l:[],n=p.useMemo(()=>r?.field?r.field:$(t),[t,r?.field]),e=p.useMemo(()=>{if(!n)return[];const d=w(t,n);return r?.showAll!==!1?[{key:g,label:r?.allLabel??"All",icon:r?.allIcon,count:t.length},...d]:d},[t,n,r?.showAll,r?.allLabel,r?.allIcon]),i=p.useMemo(()=>r?.defaultFilter&&e.some(m=>m.key===r.defaultFilter)?r.defaultFilter:e[0]?.key??g,[r?.defaultFilter,e]),[s,o]=p.useState(i),a=p.useMemo(()=>n?N(t,s,n):t,[t,s,n]),u=p.useCallback(d=>{o(d)},[]),f=!!(n&&e.length>1);return{filteredItems:a,filterOptions:e,activeFilter:s,setActiveFilter:u,showFilters:f,groupingField:n,showCount:r?.showCount??!1}}const k={sm:{padding:"px-3 py-2",text:"text-sm",gap:"gap-1.5",iconSize:"text-base"},md:{padding:"px-4 py-2.5",text:"text-base",gap:"gap-2",iconSize:"text-lg"},lg:{padding:"px-5 py-3",text:"text-lg",gap:"gap-2.5",iconSize:"text-xl"}};function z({id:l,name:r,option:t,checked:n,onChange:e,size:i="sm",showCount:s=!1,className:o=""}){const a=k[i],u=()=>{e(t.key)};return c.jsxs("div",{className:`relative ${o}`,children:[c.jsx("input",{type:"radio",id:l,name:r,value:t.key,checked:n,onChange:u,className:"absolute -left-[9999px]","aria-hidden":"true"}),c.jsx(A,{variant:"progress-b-f",triggers:"controlled",active:n,duration:400,borderRadius:"rounded-full",borderWidth:2,color:"var(--color-accent)",innerClassName:"card-bg border-off-hover",children:c.jsxs("label",{htmlFor:l,className:`
            ${a.padding} rounded-full font-medium main-duration transition-all
            flex items-center ${a.gap} cursor-pointer ${a.text}
            ${n?"text-accent":"text-heading hover:text-accent"}
          `,children:[t.icon?c.jsx(v,{data:{icon:t.icon,title:t.label},layout:"horizontal",alignment:"center",className:a.gap,iconClassName:`${a.iconSize} ${n?"text-accent":""}`,titleClassName:`${a.text} font-medium`,titleTag:"span",showDescription:!1}):c.jsx("span",{children:t.label}),s&&t.count!==void 0&&c.jsxs("span",{className:`${a.text} opacity-60`,children:["(",t.count,")"]})]})})]})}function S({options:l,activeFilter:r,onFilterChange:t,show:n=!0,groupingField:e,size:i="sm",showCount:s=!1,className:o="",name:a}){if(!n||l.length<=1)return null;const u=a??`filter-${e||"auto"}-${Date.now()}`;return c.jsx("div",{className:`flex flex-wrap gap-2 justify-center mb-8 ${o}`.trim(),role:"radiogroup","aria-label":`Filter by ${e||"category"}`,children:l.map(f=>c.jsx(z,{id:`${u}-${f.key}`,name:u,option:f,checked:r===f.key,onChange:t,size:i,showCount:s},f.key))})}function T({items:l=[],filter:r,filterSize:t="sm",filterClassName:n="",filterName:e,onFilterChange:i,...s}){const o=Array.isArray(l)?l:[],{filteredItems:a,filterOptions:u,activeFilter:f,setActiveFilter:d,showFilters:m,groupingField:h,showCount:F}=I(o,r),j=y=>{d(y),i?.(y)};return o.length===0?null:c.jsxs("div",{className:"filtered-card-renderer",children:[c.jsx(S,{options:u,activeFilter:f,onFilterChange:j,show:m,groupingField:h,size:t,showCount:F,className:n,name:e}),c.jsx("div",{className:"transition-all duration-300 ease-in-out",children:c.jsx(C,{items:a,...s})},f)]})}export{T as default};
