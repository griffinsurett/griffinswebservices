import{j as t,r}from"./react-core.D7tCyleJ.js";import{A as T}from"./AnimatedBorder.C46K-Gs7.js";import{I as D}from"./Icon.B0sW3KDO.js";import z from"./Button.DX9k5Afw.js";import{u as U}from"./useViewAnimation.BEkNZDEp.js";import{u as L}from"./useEngagementAutoplay.BvevEHa2.js";import"./useVisibility.DQCZqB_X.js";function B({icon:s,title:u,description:o,isActive:n,progress:a=0,onToggle:c,children:d,className:x=""}){return t.jsx("div",{className:`group relative ${x}`.trim(),"data-accordion-item":!0,"data-active":n?"true":"false",children:t.jsxs(T,{variant:"progress",triggers:"controlled",active:n,controller:a,duration:300,borderRadius:"rounded-3xl",borderWidth:2,className:"transition-all duration-200",innerClassName:"card-bg",children:[t.jsxs("button",{type:"button",className:"w-full text-left flex items-center justify-between p-5 hover:bg-card/50 transition-colors duration-300 cursor-pointer relative z-20",onClick:c,onMouseDown:i=>i.preventDefault(),"aria-expanded":n,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[s&&t.jsx("span",{className:"icon-large card-icon-color shrink-0",children:s.includes(":")?t.jsx(D,{icon:s,size:"lg",className:"w-6 h-6"}):t.jsx("span",{className:"text-2xl leading-none",children:s})}),t.jsx("div",{className:"text-left",children:t.jsx("p",{className:"h4",children:u})})]}),t.jsx("div",{className:`
              w-8 h-8 rounded-full flex items-center justify-center
              transition-all duration-[600ms] text-xl font-semibold
              ${n?"bg-primary text-bg":"bg-primary/15 text-accent group-hover:bg-primary/25"}
            `,"aria-hidden":"true",children:t.jsx("span",{className:"translate-y-[-1px]",children:n?"âˆ’":"+"})})]}),t.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out relative z-20 ${n?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsxs("div",{className:"px-6 pb-6",children:[t.jsx("div",{className:"w-full h-px bg-primary/15 mb-4"}),o&&t.jsx("p",{className:"text-text/80 leading-relaxed mb-4",children:o}),d]})})]})})}const R=r.forwardRef(function({desktop:u=!1,className:o="",wrapperClassName:n="",overlay:a,autoPlay:c,muted:d,playsInline:x,controls:i,preload:l,...p},v){const h=u?"w-full h-[24rem] object-cover rounded-2xl":"w-full aspect-video object-cover rounded-2xl",f=c??!0,y=d??!0,m=x??!0,b=i??u,w=l??"metadata";return t.jsxs("div",{className:`relative rounded-2xl overflow-hidden bg-card/40 ${n}`.trim(),children:[t.jsx("video",{ref:v,className:`${h} ${o}`.trim(),autoPlay:f,muted:y,playsInline:m,controls:b,preload:w,...p}),a]})}),O=s=>s.replace(/[:]/g,"");function Y({items:s,className:u="",autoAdvanceDelay:o=3e3}){const a=Array.isArray(s)?s.filter(e=>!!e&&typeof e=="object"&&!!e.title):[],c=r.useRef(null),d=r.useRef(null),[x,i]=r.useState(0),[l,p]=r.useState(0),v=r.useId(),h=r.useMemo(()=>O(v),[v]),f=U({duration:500,delay:0,threshold:0,rootMargin:"0px 0px -20% 0px"}),y=r.useMemo(()=>()=>{const e=c.current||d.current;return!e||!Number.isFinite(e.duration)?o:Math.max(0,(e.duration-e.currentTime)*1e3)+o},[o]),{engageUser:m,beginGraceWindow:b,isAutoplayPaused:w,isResumeScheduled:W,userEngaged:F,schedule:N}=L({totalItems:a.length,currentIndex:l,setIndex:e=>p(e),autoplayTime:y,resumeDelay:5e3,containerSelector:`[data-video-accordion="${h}"]`,itemSelector:`[data-video-accordion="${h}"] [data-accordion-item]`,inView:f.inView,engageOnlyOnActiveItem:!0,activeItemAttr:"data-active"}),j=r.useRef(null);r.useEffect(()=>{j.current=N},[N]),r.useEffect(()=>{a.length!==0&&l>=a.length&&p(0)},[l,a.length]);const S=r.useCallback(e=>{p(e),i(0),m(),j.current?.()},[m]),k=r.useCallback(()=>{const e=c.current||d.current;!e||!e.duration||(i(e.currentTime/e.duration*100),j.current?.())},[]),I=r.useCallback(()=>{i(0),j.current?.()},[]),C=r.useCallback(()=>{i(100),b()},[b]),E=r.useCallback(()=>{m()},[m]),{style:A,...V}=f.props;if(a.length===0)return null;const $=a[Math.min(l,a.length-1)];return t.jsx("div",{ref:f.ref,className:`animated-element fade-in relative ${u}`.trim(),"data-video-accordion":h,...V,style:A,children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-12 max-2-primary",children:[t.jsx("div",{className:"min-w-0 lg:basis-[clamp(420px,40vw,560px)] lg:flex-shrink-0 flex flex-col space-y-4","data-accordion-container":!0,children:a.map((e,g)=>{const P=e.key||e.title||`item-${g}`;return t.jsxs(B,{icon:e.icon,title:e.title,description:e.description,isActive:l===g,progress:x,onToggle:()=>S(g),children:[l===g&&t.jsx("div",{className:"lg:hidden mt-4",children:t.jsx(R,{ref:M=>{d.current=M},src:e.videoSrc,onTimeUpdate:k,onEnded:C,onLoadedData:I,onClick:E,desktop:!1},`mobile-${P}`)}),e.hasPage&&e.url&&t.jsx("div",{className:"mt-4",children:t.jsxs(z,{variant:"link",href:e.url,rightIcon:"lu:arrow-right",children:["Explore ",e.title]})})]},P)})}),t.jsxs("div",{className:"hidden lg:block lg:flex-1 min-w-0 lg:sticky lg:top-0",children:[t.jsx(R,{ref:c,src:$?.videoSrc,onTimeUpdate:k,onEnded:C,onLoadedData:I,onClick:E,desktop:!0,wrapperClassName:"shadow-2xl shadow-accent/15 bg-card/40"},`desktop-${$?.key??l}`),!1]})]})})}export{Y as default};
