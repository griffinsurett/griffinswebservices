const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/CookiePreferencesModal.DU_FkJL-.js","_astro/react-core.lhpfgRL0.js","_astro/HamburgerMenuContent.CHKu0fes.js","_astro/lazy-utils.B4fVcoSG.js","_astro/useConsent.DsEOEOaj.js","assets/styles-CaNHMA51.css","_astro/Button.DN1zURWW.js","_astro/Textarea.CKlZObm3.js","_astro/ToggleControl.Dg9C3ioJ.js","_astro/Accordion.BY_JYYu0.js","_astro/useSideDragNavigation.CHcSAsE3.js"])))=>i.map(i=>d[i]);
import{_ as j}from"./lazy-utils.B4fVcoSG.js";import{r as s,j as t}from"./react-core.lhpfgRL0.js";import{I as k}from"./ToggleControl.Dg9C3ioJ.js";import{u as E,C as N,s as L,g as u,d as l}from"./useConsent.DsEOEOaj.js";import"./Textarea.CKlZObm3.js";/* empty css                                 */const S=s.lazy(()=>j(()=>import("./CookiePreferencesModal.DU_FkJL-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),_="Please enable functional cookies to use the language switcher. You can manage your preferences in the cookie settings.";function m(){if(typeof window>"u")return l;const a=localStorage.getItem("user-language")||l.code;return u(a)||l}function A(){const[a,o]=s.useState(!1),[i,c]=s.useState(m),[f,p]=s.useState(!1),g=s.useRef(null),{hasConsentFor:h}=E(),r=h("functional");s.useEffect(()=>{c(m())},[]),s.useEffect(()=>{if(!a)return;const e=d=>{g.current?.contains(d.target)||o(!1)},n=d=>{d.key==="Escape"&&o(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",n)}},[a]),s.useEffect(()=>{if(typeof window>"u")return;const e=n=>{n.key==="user-language"&&c(u(n.newValue||l.code)||l)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);const w=()=>{p(!0),o(!1)},b=()=>{p(!1)},y=e=>{if(!r){alert(_);return}const n=u(e);n&&c(n),typeof window<"u"&&window.changeLanguage&&window.changeLanguage(e),o(!1)},C=["faded-bg",a?"ring-2 ring-primary/60":"","text-primary"].filter(Boolean).join(" "),v=i.code?.split("-")[0]?.toUpperCase()||"EN",x=i.flag;return t.jsxs("div",{ref:g,className:"relative contents",children:[t.jsx(N,{checked:a,onChange:()=>o(e=>!e),"aria-label":"Choose display language",title:r?"Choose your site language":"Enable functional cookies to change language",className:C,children:t.jsx("div",{className:"flex items-center justify-center",children:x?t.jsx("span",{className:"text-xl leading-none","aria-hidden":"true",children:x}):t.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide","aria-hidden":"true",children:v})})}),a&&t.jsxs("div",{className:"absolute top-full left-1/2 z-[60] mt-3 min-w-[220px] -translate-x-1/2 rounded-2xl border card-bg p-3 shadow-2xl backdrop-blur-xl",onWheel:e=>{e.stopPropagation()},onWheelCapture:e=>e.stopPropagation(),children:[!r&&t.jsxs("button",{type:"button",onClick:w,className:"mb-2 rounded-xl border border-yellow-400/40 bg-yellow-500/15 px-3 py-2 text-xs text-text text-left transition hover:border-yellow-400 hover:bg-yellow-500/25 focus:outline-none focus-visible:ring-2 focus-visible:ring-yellow-400",children:["Enable functional cookies to switch languages.",t.jsx("span",{className:"mt-1 block text-[11px] font-semibold uppercase tracking-wide text-primary",children:"Manage consent preferences"})]}),t.jsx("div",{className:"flex max-h-64 flex-col overflow-y-auto",children:L.map(e=>{const n=e.code===i.code;return t.jsxs("button",{type:"button",className:`flex items-center gap-3 rounded-xl px-3 py-2 text-sm transition ${n?"bg-primary/20 text-primary font-semibold":"hover:bg-white/5 text-text"} ${r?"":"cursor-not-allowed opacity-60"}`,onClick:()=>y(e.code),disabled:!r,children:[e.flag&&t.jsx("span",{className:"text-lg","aria-hidden":"true",children:e.flag}),t.jsxs("span",{className:"flex-1 text-left",children:[t.jsx("span",{className:"block text-base leading-tight",children:e.nativeName}),t.jsx("span",{className:"text-xs text-text/70",children:e.name})]}),n&&t.jsx("span",{className:"text-primary","aria-label":"Currently selected language",children:t.jsx(k,{icon:"lucide:check",size:"sm",className:"text-primary"})})]},e.code)})})]}),f&&t.jsx(s.Suspense,{fallback:null,children:t.jsx(S,{isOpen:f,onClose:b})})]})}export{A as default};
