import{r as n}from"./react-core.D25xx4CH.js";function G(r){return r?.current?r.current:typeof window<"u"?window:null}function L(r){return r?r===window?typeof window<"u"&&window.scrollY||0:r.scrollTop||0:0}const $=({elementRef:r,scrollThreshold:m=10,debounceDelay:w=150,trustedOnly:p=!0,internalFlagRef:a,wheelSensitivity:v=1,onScrollActivity:g,onScrollUp:f,onScrollDown:i,onScrollStart:d,onScrollEnd:b,onDirectionChange:u,onWheelActivity:x}={})=>{const D=n.useRef(null),T=n.useRef(0),M=n.useRef("none"),P=n.useRef(!1),h=n.useRef(null),e=n.useCallback(()=>{D.current&&(clearTimeout(D.current),D.current=null)},[]),t=n.useCallback(()=>{e(),D.current=setTimeout(()=>{if(P.current){P.current=!1;const s=h.current;b?.({pos:L(s),dir:M.current})}},w)},[e,w,b]),o=n.useCallback((s,l)=>{if(Math.abs(s)<m)return;const E=h.current,y=L(E),R=s>0?"down":"up";P.current||(P.current=!0,d?.({pos:y,dir:R,source:l})),R!==M.current&&M.current!=="none"&&u?.({from:M.current,to:R,pos:y,source:l}),M.current=R;const C={dir:R,delta:Math.abs(s),pos:y,source:l};g?.(C),R==="down"?i?.(C):f?.(C),t()},[g,i,d,f,u,t,m]);return n.useEffect(()=>{const s=G(r);h.current=s,T.current=L(s)},[r]),n.useEffect(()=>{const s=h.current||G(r);if(!s)return;const l=E=>{if(p&&!E.isTrusted||a?.current)return;const y=(E.deltaY||0)*v;y!==0&&(x?.({deltaY:y,deltaX:E.deltaX||0,deltaZ:E.deltaZ||0,deltaMode:E.deltaMode,event:E}),o(y,"wheel"))};return s.addEventListener("wheel",l,{passive:!0}),()=>s.removeEventListener("wheel",l)},[r,o,a,x,p,v]),n.useEffect(()=>{const s=h.current||G(r);if(!s)return;const l=()=>{if(a?.current)return;const E=L(s),y=E-T.current;T.current=E,y!==0&&o(y,"scroll")};return s.addEventListener("scroll",l,{passive:!0}),()=>s.removeEventListener("scroll",l)},[r,o,a]),n.useEffect(()=>()=>e(),[e]),{getCurrentPos:()=>L(h.current),getLastPos:()=>T.current,getLastDir:()=>M.current,isScrolling:()=>P.current}},B=({onHoverStart:r=()=>{},onHoverEnd:m=()=>{},hoverDelay:w=0,unhoverIntent:p}={})=>{const a=n.useRef(null),v=!!p?.enabled,g=n.useRef(null),f=n.useRef(null),i=n.useRef({active:!1,elem:null,index:null,leftAt:0,rect:null,minDist:0,reentryGraceMs:0,lastPos:{x:NaN,y:NaN},lastDistance:1/0}),d=n.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null)},[]),b=n.useCallback(()=>{f.current&&(f.current(),f.current=null),g.current&&(clearTimeout(g.current),g.current=null)},[]),u=n.useCallback(e=>{if(!v)return;const t=i.current;t.active&&(b(),t.active=!1,p?.onUnhoverCancel?.(t.elem,t.index,{reason:e}))},[v,b,p]),x=n.useCallback(()=>{if(!v)return;const e=i.current;if(!e.active)return;const t={timeAway:Date.now()-e.leftAt,distance:e.lastDistance};b(),e.active=!1,p?.onUnhoverCommit?.(e.elem,e.index,t)},[v,b,p]),D=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t,bottom:e.bottom+t}),T=(e,t,o)=>{const s=e<o.left?o.left-e:e>o.right?e-o.right:0,l=t<o.top?o.top-t:t>o.bottom?t-o.bottom:0;return Math.hypot(s,l)},M=n.useCallback((e,t)=>{if(!v||typeof window>"u")return;u("restart");const{leaveDelay:o=120,reentryGraceMs:s=250,minOutDistance:l=8,boundaryPadding:E=6}=p??{},y=Number(o),R=Number(s),C=Number(l),S=Number(E),I=e?.getBoundingClientRect?.(),X=I?D(I,S):null,c=i.current;c.active=!0,c.elem=e??null,c.index=t??null,c.leftAt=Date.now(),c.rect=X,c.minDist=C,c.reentryGraceMs=R,c.lastDistance=1/0;const V=k=>{if(!c.active)return;const N=k.clientX,O=k.clientY;if(c.lastPos={x:N,y:O},c.rect){const A=T(N,O,c.rect);c.lastDistance=A,A===0&&Date.now()-c.leftAt<=c.reentryGraceMs&&u("reenter-geom")}};window.addEventListener("pointermove",V,{passive:!0}),f.current=()=>window.removeEventListener("pointermove",V);const Y=()=>{if(!c.active)return;const k=Date.now()-c.leftAt,N=c.lastDistance;k>=y&&N>=c.minDist?x():g.current=setTimeout(Y,Math.max(30,y/3))};g.current=setTimeout(Y,y)},[u,x,v,p]),P=n.useCallback((e,t=null)=>{d(),u("enter"),w>0?a.current=setTimeout(()=>r(e,t),w):r(e,t)},[u,d,w,r]),h=n.useCallback((e,t=null)=>{d(),w>0?a.current=setTimeout(()=>m(e,t),w):m(e,t),M(e,t)},[d,w,m,M]);return n.useEffect(()=>()=>{d(),b(),i.current.active=!1},[d,b]),{handleMouseEnter:P,handleMouseLeave:h,cancelUnhoverIntent:()=>u("manual")}};function z(r,{threshold:m=.1,root:w=null,rootMargin:p="0px",once:a=!1,onEnter:v,onExit:g}={}){let f=!1,i=!1,d=null;return!r||typeof IntersectionObserver>"u"?{isVisible:f,hasBeenSeen:i,disconnect:()=>{}}:(d=new IntersectionObserver(b=>{const u=b[0];if(!u)return;const x=u.isIntersecting;f=x,x?(i||(i=!0),v?.(u),a&&d?.disconnect()):g?.(u)},{threshold:m,root:w,rootMargin:p}),d.observe(r),{get isVisible(){return f},get hasBeenSeen(){return i},disconnect:()=>d?.disconnect()})}function U(r){if(typeof r=="number")return`0px 0px ${r}px 0px`;const m=String(r??"").trim();return/^-?\d+px$/.test(m)?`0px 0px ${m} 0px`:m||"0px"}function j(r,{threshold:m=.1,root:w=null,rootMargin:p="0px",once:a=!1,onEnter:v,onExit:g,onForward:f,onBackward:i,pauseDelay:d=100,restoreAtTopOffset:b=100,menuCheckboxId:u}={}){const[x,D]=n.useState(!1),[T,M]=n.useState(!1),P=n.useMemo(()=>U(p),[p]);n.useEffect(()=>{const e=r?.current;if(!e)return;const{isVisible:t,hasBeenSeen:o,disconnect:s}=z(e,{threshold:m,root:w,rootMargin:P,once:a,onEnter:l=>{D(!0),M(!0),v?.(l)},onExit:l=>{D(!1),g?.(l)}});return D(t),M(o),s},[r,m,w,P,a,v,g]);const h=typeof f=="function"||typeof i=="function";return $({elementRef:null,scrollThreshold:5,debounceDelay:d,onScrollActivity:h?({dir:e})=>{e==="down"?f?.():typeof window<"u"&&window.pageYOffset<=b&&i?.()}:void 0}),n.useEffect(()=>{if(!u||!h||typeof document>"u")return;const e=document.getElementById(u);if(!e)return;const t=()=>{e.checked?i?.():typeof window<"u"&&window.pageYOffset>b?f?.():i?.()};return e.addEventListener("change",t),t(),()=>e.removeEventListener("change",t)},[u,i,f,b,h]),a?T:x}export{$ as a,B as b,j as u};
