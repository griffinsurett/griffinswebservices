---
// src/layouts/TextHero.astro
// Lightweight hero with zero JavaScript - optimized for 100 Lighthouse score
import Button from "@/components/Button/Button";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import SectionHeader from "@/components/SectionHeader.astro";
import { query } from "@/utils/query";
import { siteData } from "@/content/siteData";
import type { HeadingContent } from "@/content/schema";

interface CTA {
  text: string;
  link: string;
  rightIcon?: string;
}

export interface Props {
  heading?: HeadingContent;
  description?: string;
  primaryCTA?: CTA;
  className?: string;
  id?: string;
}

const defaultDescription =
  "Hand-crafted websites, automated systems, and ongoing support so you can sell more, grow faster, and stay secure without juggling multiple vendors.";

const {
  heading,
  description = siteData.description ?? defaultDescription,
  primaryCTA = {
    text: "Book An Intro Call",
    link: "#contact",
    rightIcon: "lu:arrow-right",
  },
  className = "",
  id = "hero",
} = Astro.props as Props;
---

<section
  id={id}
  class={`min-h-screen flex items-center justify-center relative overflow-hidden ${className}`}
>
  <div class="relative z-10 min-h-screen inner-section flex items-center">
    <div class="mx-auto max-w-4xl text-center space-y-8 py-20">
      <SectionHeader
        className="text-center w-full"
        heading={heading}
        headingTag="h1"
        headingClassName="h1"
        description={description ?? defaultDescription}
        descriptionClassName="hero-text text-lg leading-relaxed max-w-2xl mx-auto"
      />

      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-6">
        <Button
          href={primaryCTA.link}
          variant="primary"
          size="lg"
          rightIcon={primaryCTA.rightIcon}
        >
          {primaryCTA.text}
        </Button>

        <ContentRenderer
          query={query("testimonials")
            .where((entry) => entry.data.featured === true)
            .limit(3)}
          variant="TestimonialCirclesVariant"
          className="px-2 md:px-0"
          counterStart={10}
          counterEnd={100}
          counterDuration={1800}
          counterSuffix="+"
          counterLabel="Happy Clients"
        />
      </div>
    </div>
  </div>
</section>
