---
import Heading from "@/components/Heading";
import BackgroundMedia from "@/components/BackgroundMedia.astro";
import meoncompImg from "@/assets/meoncomp.jpg";
import logoImg from "@/assets/GWS-animated.png";
import Button from "@/components/Button/Button";
import Counter from "@/components/Counter";
import { animationProps } from "@/integrations/scroll-animations/props";

---
<section class="min-h-screen w-full outer-section">
    <div class="inner-section flex flex-wrap gap-6">
        <div
            class="group flex w-full lg:flex-1 flex-col min-h-[400px] rounded-3xl overflow-hidden relative card-bg"
            {...animationProps("fade-in-up", { once: false, threshold: 0.20, rootMargin: "-15% 0px -35% 0px" })}
        >
            <div class="flex flex-col p-6 space-y-2 relative z-10">
                <h2 class="text-3xl lg:text-4xl xl:text-5xl font-bold">
                    <Counter end={100} client:visible />+
                </h2>
                <p class="text-text large-text leading-tight">
                    Lightning Fast Websites powering up businesses like yours!
                </p>
            </div>
            <div
                class="absolute bottom-0 w-full h-110 -mb-42 lg:-mb-52 overflow-hidden z-0"
            >
                <BackgroundMedia
                    backgroundMedia={{
                        image: {
                            src: logoImg,
                            imageClass: "object-contain light:invert",
                            aboveTheFold: false,
                            quality: 35,
                            maxWidth: 450,
                        },
                    }}
                />
            </div>
        </div>
        <div
            class="group flex w-full md:flex-1 lg:flex-2 flex-col md:flex-row min-h-[400px] rounded-3xl overflow-hidden card-bg relative"
            {...animationProps("fade-in-right", { once: false, threshold: 0.35, rootMargin: "-10% 0px -25% 0px", delay: 300 })}
        >
            <div
                class="relative flex-1 lg:rounded-br-[250px] overflow-hidden md:w-1/2 lg:mb-5 z-0 fade-image-shell"
            >
                <BackgroundMedia
                    backgroundMedia={{
                        image: {
                            src: meoncompImg,
                            imageClass: "object-cover fade-card-media",
                            aboveTheFold: false,
                            quality: 25,
                            maxWidth: 600,
                        },
                    }}
                />
            </div>
            <div
                class="flex-1 flex flex-col gap-6 justify-center items-end p-6 lg:px-6 relative z-10"
            >
                <!-- <div class="inner-section">will be something</div> -->
                <Heading
                    tagName="h3"
                    className="text-3xl lg:text-4xl lg:text-right text-left"
                    before="We're a New Jersey based Web Agency that creates "
                    text="fast, engaging websites."
                    textClass="m-0 p-0 emphasized-text"
                />
                <Button
                    href={"/"}
                    variant="secondary"
                    size="lg"
                    client:visible
                >
                    Learn More
                </Button>
            </div>
        </div>
    </div>
</section>

<style>
  /* Soft fade + faux shadow so the portrait melts into the card background */
  .fade-image-shell {
    isolation: isolate;
    background-color: var(--card-bg);
  }

  .fade-image-shell::before,
  .fade-image-shell::after {
    content: "";
    position: absolute;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0;
  }

  .fade-image-shell::before {
    inset: 0;
    background:
      radial-gradient(circle at 30% 40%, rgba(8, 8, 10, 0) 58%, rgba(8, 8, 10, 0.45) 80%, rgba(8, 8, 10, 0.85) 100%),
      linear-gradient(108deg, rgba(10, 10, 12, 0) 48%, rgba(10, 10, 12, 0.55) 68%, var(--card-bg) 90%);
    opacity: 0.95;
    transition: opacity 400ms ease;
  }

  .fade-image-shell::after {
    inset: 6% 4% 10%;
    box-shadow: 0 55px 120px rgba(5, 5, 5, 0.55);
    opacity: 0.7;
    filter: blur(12px);
  }

  .fade-card-media {
    position: relative;
    z-index: 1;
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    -webkit-mask-image: radial-gradient(circle at 35% 50%, rgba(0, 0, 0, 1) 55%, rgba(0, 0, 0, 0.6) 75%, transparent 95%);
    mask-image: radial-gradient(circle at 35% 50%, rgba(0, 0, 0, 1) 55%, rgba(0, 0, 0, 0.6) 75%, transparent 95%);
    -webkit-mask-size: 140% 140%;
    mask-size: 140% 140%;
    -webkit-mask-position: 50% 50%;
    mask-position: 50% 50%;
    transition: transform 450ms ease, -webkit-mask-position 450ms ease, mask-position 450ms ease;
  }

  @media (min-width: 768px) {
    .fade-card-media {
      -webkit-mask-image: linear-gradient(105deg, rgba(0, 0, 0, 1) 58%, rgba(0, 0, 0, 0.4) 78%, transparent 100%);
      mask-image: linear-gradient(105deg, rgba(0, 0, 0, 1) 58%, rgba(0, 0, 0, 0.4) 78%, transparent 100%);
      -webkit-mask-size: 100% 100%;
      mask-size: 100% 100%;
    }
  }

  .fade-image-shell:hover .fade-card-media {
    transform: scale(1.03);
    -webkit-mask-position: 60% 50%;
    mask-position: 60% 50%;
  }

  .fade-image-shell:hover::before {
    opacity: 0.8;
  }
</style>
