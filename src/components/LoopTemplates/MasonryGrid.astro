---
// src/components/LoopTemplates/MasonryGrid.astro
/**
 * MasonryGrid - 2-column layout with balanced distribution
 * Each card is rendered as a slot for individual hydration
 * Cards fade in on scroll
 */

export interface MasonryCardData {
  title: string;
  description?: string;
  icon?: string;
  order?: number;
  Content?: any;
}

interface Props {
  items: MasonryCardData[];
  className?: string;
}

const { items, className = "" } = Astro.props;

// Distribute items into columns for balanced heights
// Alternates items between left and right columns
const leftColumn: MasonryCardData[] = [];
const rightColumn: MasonryCardData[] = [];

items.forEach((item, index) => {
  if (index % 2 === 0) {
    leftColumn.push(item);
  } else {
    rightColumn.push(item);
  }
});
---

<div class={`masonry-grid ${className}`}>
  <div class="masonry-column">
    {leftColumn.map((item) => (
      <article
        class="masonry-card"
        data-animate="fade-in-up"
        data-animate-threshold="0.15"
        data-animate-root-margin="-10% 0px -10% 0px"
      >
        <h3 class="text-xl font-semibold text-text mb-2">{item.title}</h3>
        {item.description && (
          <p class="text-sm text-text/60 leading-relaxed">{item.description}</p>
        )}
        {item.Content && (
          <div class="masonry-content mt-4">
            <item.Content />
          </div>
        )}
      </article>
    ))}
  </div>
  <div class="masonry-column">
    {rightColumn.map((item) => (
      <article
        class="masonry-card"
        data-animate="fade-in-up"
        data-animate-threshold="0.15"
        data-animate-root-margin="-10% 0px -10% 0px"
      >
        <h3 class="text-xl font-semibold text-text mb-2">{item.title}</h3>
        {item.description && (
          <p class="text-sm text-text/60 leading-relaxed">{item.description}</p>
        )}
        {item.Content && (
          <div class="masonry-content mt-4">
            <item.Content />
          </div>
        )}
      </article>
    ))}
  </div>
</div>
