---
// src/components/Form/forms/QuoteForm.astro
/**
 * Quote Form - Astro Version
 * Pure HTML with optional React enhancement via client:idle
 */
import Button from "@/components/Button/Button";
import FormWrapper from "@/components/Form/FormWrapper";
import Input from "@/components/Form/inputs/Input";
import Checkbox from "@/components/Form/inputs/Checkbox";
import Select from "@/components/Form/inputs/Select";
import Textarea from "@/components/Form/inputs/Textarea";

interface Props {
  title?: string;
  description?: string;
  className?: string;
}

const { title, description, className = "" } = Astro.props;

const WEBSITE_TYPE_OPTIONS = [
  { value: "landing-page", label: "Landing Pages" },
  { value: "small-business", label: "Small Business Websites" },
  { value: "portfolio", label: "Personal Portfolios" },
  { value: "blog", label: "Blogs" },
  { value: "ecommerce", label: "E-Commerce" },
  { value: "custom-app", label: "Custom Applications" },
];

const BUDGET_OPTIONS = [
  { value: "under-5k", label: "Under $5,000" },
  { value: "5k-10k", label: "$5,000 - $10,000" },
  { value: "10k-25k", label: "$10,000 - $25,000" },
  { value: "25k-50k", label: "$25,000 - $50,000" },
  { value: "over-50k", label: "$50,000+" },
];

const TIMELINE_OPTIONS = [
  { value: "asap", label: "ASAP" },
  { value: "1-month", label: "Within 1 month" },
  { value: "2-3-months", label: "2-3 months" },
  { value: "3-6-months", label: "3-6 months" },
  { value: "flexible", label: "I'm flexible" },
];

const handleSubmit = async (values: any) => {
  console.log("Quote form submitted:", values);
};
---

<div class={className}>
  {title && <h2 class="text-3xl font-bold mb-3">{title}</h2>}
  {description && <p class="text-text mb-8">{description}</p>}

  <FormWrapper
    client:idle
    onSubmit={handleSubmit}
    successMessage="Thank you for your quote request! We'll get back to you soon."
    resetOnSuccess={true}
    className="group section-box card-bg outer-card-transition md:mx-5 lg:mx-10 xl:mx-15 flex flex-col relative overflow-hidden"
  >
    <div class="inner-card-style inner-card-transition inner-card-color" aria-hidden="true"></div>

    <div class="relative z-10 grid gap-4 md:grid-cols-2">
      <Input
        name="firstName"
        label="First Name"
        type="text"
        required={true}
        minLength={2}
        placeholder="First Name *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        name="lastName"
        label="Last Name"
        type="text"
        required={true}
        minLength={2}
        placeholder="Last Name *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        name="email"
        label="Email"
        type="email"
        required={true}
        placeholder="Email Address *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        name="phone"
        label="Phone Number"
        type="tel"
        required={true}
        pattern="[0-9]{10,}"
        placeholder="Phone Number *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        name="company"
        label="Company Name"
        type="text"
        placeholder="Company Name"
        containerClassName="md:col-span-2"
        showLabel={false}
      />

      <Select
        name="websiteType"
        label="Website Type"
        required={true}
        options={WEBSITE_TYPE_OPTIONS}
        placeholder="Type of Website *"
        containerClassName="md:col-span-2"
        showLabel={false}
      />

      <Select
        name="budget"
        label="Budget"
        options={BUDGET_OPTIONS}
        placeholder="Project Budget"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Select
        name="timeline"
        label="Timeline"
        options={TIMELINE_OPTIONS}
        placeholder="Project Timeline"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Textarea
        name="message"
        label="Project Details"
        required={true}
        minLength={10}
        placeholder="Project Details * - Tell us about your project, goals, and any specific requirements..."
        rows={5}
        containerClassName="md:col-span-2"
        showLabel={false}
      />
    </div>

    <Checkbox
      name="privacy"
      required
      containerClassName="relative z-10 flex items-start gap-2 md:col-span-2 my-4"
      labelClassName="flex items-start gap-2 text-sm text-text"
      checkboxClassName="h-4 w-4 rounded border-muted/60 accent-primary"
    >
      I have read and agree to the{" "}
      <Button
        client:load
        variant="link"
        href="/privacy-policy"
        target="_blank"
        rel="noopener noreferrer"
      >
        Privacy Policy
      </Button>
    </Checkbox>

    <div class="text-center relative z-10 pt-4">
      <Button client:load variant="primary" type="submit" className="w-full md:w-auto">
        Get Your Quote
      </Button>
    </div>
  </FormWrapper>
</div>
