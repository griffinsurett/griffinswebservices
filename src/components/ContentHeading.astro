---
import Heading from "@/components/Heading";
import type { HeadingContent } from "@/content/schema";

interface Props {
  heading?: HeadingContent | null;
  value?: HeadingContent | null; // alias for heading to support flexible prop names
  tagName?: string;
  className?: string;
  beforeClass?: string;
  textClass?: string;
  afterClass?: string;
  [key: string]: any;
}

const {
  heading,
  value,
  tagName = "h2",
  className = "",
  beforeClass = "",
  textClass = "",
  afterClass = "",
  ...headingProps
} = Astro.props as Props;

const resolvedHeading = heading ?? value ?? null;
const isSegmentedHeading =
  typeof resolvedHeading === "object" && resolvedHeading !== null;
---

{resolvedHeading && (
  isSegmentedHeading ? (
    <Heading
      tagName={tagName}
      className={className}
      before={resolvedHeading.before}
      text={resolvedHeading.text}
      after={resolvedHeading.after}
      beforeClass={beforeClass}
      textClass={textClass}
      afterClass={afterClass}
      {...headingProps}
    />
  ) : (
    <Heading tagName={tagName} className={className} {...headingProps}>
      {resolvedHeading}
    </Heading>
  )
)}
