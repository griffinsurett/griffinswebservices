---
// src/components/LoopComponents/FeatureCard.astro
import AnimatedBorder from "../AnimatedBorder/AnimatedBorder";
import Icon from "@/components/Icon";
import type { IconType } from "@/content/schema";

interface FeatureCardData {
  icon?: IconType;
  title?: string;
  description?: string;
  featured?: boolean;
}

export interface Props {
  data?: FeatureCardData;
  icon?: string;
  title?: string;
  description?: string;
  ringDuration?: number;
  class?: string;
}

const {
  data,
  icon,
  title,
  description,
  ringDuration = 800,
  class: className = "",
} = Astro.props as Props;

const cardData: FeatureCardData = data ?? {
  icon,
  title,
  description,
};

const resolvedIcon = (cardData.icon ?? icon) as IconType | undefined;
const resolvedTitle = cardData.title ?? title ?? "";
const resolvedDescription = cardData.description ?? description ?? "";
---

<div class={className}>
  <AnimatedBorder
    variant="progress-b-f"
    triggers="hover"
    duration={ringDuration}
    borderRadius="rounded-3xl"
    borderWidth={2}
    className="group text-center outer-card-transition outer-card-hover-transition !duration-[900ms] ease-out"
    innerClassName="h-85 mx-auto px-10 flex flex-col justify-center items-center relative card-bg"
    client:visible
  >
    <div class="inner-card-style inner-card-transition inner-card-color"></div>

    {
      resolvedIcon && (
        <div class="icon-large z-10 mb-5 card-icon-color flex items-center justify-center">
          <Icon icon={resolvedIcon} size="xl" className="text-current" />
        </div>
      )
    }

    {resolvedTitle && <h3 class="h3 mb-3 relative z-10">{resolvedTitle}</h3>}
    {resolvedDescription && (
      <p class="text-text leading-relaxed relative z-10">{resolvedDescription}</p>
    )}
  </AnimatedBorder>
</div>
