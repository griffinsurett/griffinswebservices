import{r as n}from"./react-core.LlkHSr3O.js";import{c as z}from"./scroll-observer.EoeTqr10.js";function $(e){return e?.current?e.current:typeof window<"u"?window:null}function P(e){return e?e===window?typeof window<"u"&&window.scrollY||0:e.scrollTop||0:0}const H=({elementRef:e,scrollThreshold:o=10,debounceDelay:v=150,trustedOnly:g=!0,internalFlagRef:l,wheelSensitivity:L=1,onScrollActivity:M,onScrollUp:w,onScrollDown:d,onScrollStart:Y,onScrollEnd:E,onDirectionChange:h,onWheelActivity:T}={})=>{const a=n.useRef(null),x=n.useRef(0),f=n.useRef("none"),p=n.useRef(!1),c=n.useRef(null),s=n.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null)},[]),m=n.useCallback(()=>{s(),a.current=setTimeout(()=>{if(p.current){p.current=!1;const t=c.current,r=f.current;E?.({pos:P(t),dir:r==="none"?"down":r})}},v)},[s,v,E]),b=n.useCallback((t,r)=>{if(Math.abs(t)<o)return;const u=c.current,i=P(u),y=t>0?"down":"up";p.current||(p.current=!0,Y?.({pos:i,dir:y,source:r})),y!==f.current&&f.current!=="none"&&h?.({from:f.current,to:y,pos:i,source:r}),f.current=y;const V={dir:y,delta:Math.abs(t),pos:i,source:r};M?.(V),y==="down"?d?.(V):w?.(V),m()},[M,d,Y,w,h,m,o]);return n.useEffect(()=>{const t=$(e);c.current=t,x.current=P(t)},[e]),n.useEffect(()=>{const t=c.current||$(e);if(!t)return;const r=u=>{if(g&&!u.isTrusted||l?.current)return;const i=(u.deltaY||0)*L;i!==0&&(T?.({deltaY:i,deltaX:u.deltaX||0,deltaZ:u.deltaZ||0,deltaMode:u.deltaMode,event:u}),b(i,"wheel"))};return t.addEventListener("wheel",r,{passive:!0}),()=>t.removeEventListener("wheel",r)},[e,b,l,T,g,L]),n.useEffect(()=>{const t=c.current||$(e);if(!t)return;const r=()=>{if(l?.current)return;const u=P(t),i=u-x.current;x.current=u,i!==0&&b(i,"scroll")};return t.addEventListener("scroll",r,{passive:!0}),()=>t.removeEventListener("scroll",r)},[e,b,l]),n.useEffect(()=>()=>s(),[s]),{getCurrentPos:()=>P(c.current),getLastPos:()=>x.current,getLastDir:()=>f.current,isScrolling:()=>p.current}};function S(e){if(typeof e=="number")return`0px 0px ${e}px 0px`;const o=String(e??"").trim();return/^-?\d+px$/.test(o)?`0px 0px ${o} 0px`:o||"0px"}function C(e,{threshold:o=.1,root:v=null,rootMargin:g="0px",once:l=!1,onEnter:L,onExit:M,onForward:w,onBackward:d,pauseDelay:Y=100,restoreAtTopOffset:E=100,menuCheckboxId:h}={}){const[T,a]=n.useState(!1),[x,f]=n.useState(!1),p=n.useMemo(()=>S(g),[g]);n.useEffect(()=>{const s=e?.current;if(!s)return;const{isVisible:m,hasBeenSeen:b,disconnect:t}=z(s,{threshold:o,root:v,rootMargin:p,once:l,onEnter:r=>{a(!0),f(!0),L?.(r)},onExit:r=>{a(!1),M?.(r)}});return a(m),f(b),t},[e,o,v,p,l,L,M]);const c=typeof w=="function"||typeof d=="function";return H({elementRef:null,scrollThreshold:5,debounceDelay:Y,onScrollActivity:c?({dir:s})=>{s==="down"?w?.():typeof window<"u"&&window.pageYOffset<=E&&d?.()}:void 0}),n.useEffect(()=>{if(!h||!c||typeof document>"u")return;const s=document.getElementById(h);if(!s)return;const m=()=>{s.checked?d?.():typeof window<"u"&&window.pageYOffset>E?w?.():d?.()};return s.addEventListener("change",m),m(),()=>s.removeEventListener("change",m)},[h,d,w,E,c]),l?x:T}export{H as a,$ as r,C as u};
